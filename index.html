<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>My Portfolio</title>
	<style>
		#profileImage {
			border: 1px solid black;
			border-radius: 50%;
			vertical-align: bottom;
			margin: 1em;
		}

		#personalDetails {
			margin-left: 1em;
			display: inline-block;
		}

		#output {
			margin: 1em 0 0 1em;
			display: inline-block;
			padding: 15px;
			border: 1px solid black;
			border-radius: 10px;
		}
	</style>
</head>

<body>
	<section class="container">
		<div id="loading">
			Loading...
		</div>

		<div id="mainContainer" hidden>
			<div id="personalInfo">
				<img height="250" width="250" id="profileImage">
				<div id="personalDetails">
					<h1 id="fullName"></h1>
					<p id="bio"></p>
					<h5 id="followersInfo"></h5>
					<h5 id="followingInfo"></h5>
					<h5 id="reposInfo"></h5>
					<p>Check my <a id="githubLink">GitHub</a>.</p>
					<p>Check my <a id="linkedinLink">LinkedIn</a>.</p>
				</div>
			</div>
			<hr>
			<div id="output"></div>
		</div>
	</section>

  <script>
		fetch('https://api.github.com/users/shishirneupane')
		.then((res) => res.json())
		.then((data) => {
			console.log(data)
			document.getElementById('profileImage').src = data['avatar_url']
			document.getElementById('fullName').textContent = data['name']
			document.getElementById('bio').textContent = data['bio']
			document.getElementById('followersInfo').textContent = 'GitHub followers: ' + data['followers']
			document.getElementById('followingInfo').textContent = 'GitHub following: ' + data['following']
			document.getElementById('reposInfo').textContent = 'Public repositories: ' + data['public_repos']
			document.getElementById('githubLink').href = data['html_url']
			document.getElementById('linkedinLink').href = data['blog']
			document.getElementById('mainContainer').hidden = false
			document.getElementById('loading').hidden = true
		})
		.catch((err) => console.log(err));
			
		
		fetch('https://api.github.com/users/shishirneupane/repos')
		.then(res => res.json())
		.then((reposData) => {
			console.log(reposData)
			let output = '<h2>My Projects</h2>'
			document.getElementById('output').innerHTML = output;
			for (var i=0; i < reposData.length; i++) {
				document.getElementById('output').innerHTML += "<a href=" + reposData[i].html_url + "/>" + reposData[i].name + "<br/><br/>";
			}
		})
		.catch((err) => console.log(err));
	</script>
</body>
</html>